{"from": {"secList": ["sec-promise.allsettled-resolve-element-functions", "sec-performpromiseallsettled", "sec-promise.allsettled-reject-element-functions"], "secData": {"sec-promise.allsettled-resolve-element-functions": {"num": "25.6.4.2.2", "title": "#sec-promise.allsettled-resolve-element-functions Promise.allSettled Resolve Element Functions", "html": "<emu-clause id=\"sec-promise.allsettled-resolve-element-functions\">\n          <h1><span class=\"secnum excluded-secnum\" excluded-id=\"sec-promise.allsettled-resolve-element-functions\">#sec-promise.allsettled-resolve-element-functions</span> <code>Promise.allSettled</code> Resolve Element Functions</h1>\n          <p>A <code>Promise.allSettled</code> resolve element function is an anonymous built-in function that is used to resolve a specific <code>Promise.allSettled</code> element. Each <code>Promise.allSettled</code> resolve element function has [[Index]], [[Values]], [[Capability]], [[RemainingElements]], and [[AlreadyCalled]] internal slots.</p>\n          <p>When a <code>Promise.allSettled</code> resolve element function is called with argument <var>x</var>, the following steps are taken:</p>\n          <emu-alg><ol><li>Let <var>F</var> be the <emu-xref href=\"#active-function-object\"><a href=\"#active-function-object\">active function object</a></emu-xref>.</li><li>Let <var>alreadyCalled</var> be <var>F</var>.[[AlreadyCalled]].</li><li>If <var>alreadyCalled</var>.[[Value]] is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Set <var>alreadyCalled</var>.[[Value]] to <emu-val>true</emu-val>.</li><li>Let <var>index</var> be <var>F</var>.[[Index]].</li><li>Let <var>values</var> be <var>F</var>.[[Values]].</li><li>Let <var>promiseCapability</var> be <var>F</var>.[[Capability]].</li><li>Let <var>remainingElementsCount</var> be <var>F</var>.[[RemainingElements]].</li><li>Let <var>obj</var> be !&#160;<emu-xref aoid=\"ObjectCreate\"><a href=\"#sec-objectcreate\">ObjectCreate</a></emu-xref>(%Object.prototype%).</li><li>Perform !&#160;<emu-xref aoid=\"CreateDataProperty\"><a href=\"#sec-createdataproperty\">CreateDataProperty</a></emu-xref>(<var>obj</var>, <code>\"status\"</code>, <code>\"fulfilled\"</code>).</li><li>Perform !&#160;<emu-xref aoid=\"CreateDataProperty\"><a href=\"#sec-createdataproperty\">CreateDataProperty</a></emu-xref>(<var>obj</var>, <code>\"value\"</code>, <var>x</var>).</li><li>Set <var>values</var>[<var>index</var>] to be <var>obj</var>.</li><li>Set <var>remainingElementsCount</var>.[[Value]] to <var>remainingElementsCount</var>.[[Value]] - 1.</li><li>If <var>remainingElementsCount</var>.[[Value]] is 0, then<ol><li>Let <var>valuesArray</var> be !&#160;<emu-xref aoid=\"CreateArrayFromList\"><a href=\"#sec-createarrayfromlist\">CreateArrayFromList</a></emu-xref>(<var>values</var>).</li><li>Return ?&#160;<emu-xref aoid=\"Call\"><a href=\"#sec-call\">Call</a></emu-xref>(<var>promiseCapability</var>.[[Resolve]], <emu-val>undefined</emu-val>, &#171; <var>valuesArray</var> &#187;).</li></ol></li><li>Return <emu-val>undefined</emu-val>.\n          </li></ol></emu-alg>\n          <p>The <code>\"length\"</code> property of a <code>Promise.allSettled</code> resolve element function is 1.</p>\n        </emu-clause>\n\n        "}, "sec-performpromiseallsettled": {"num": "25.6.4.2.1", "title": "#sec-performpromiseallsettled Runtime Semantics: PerformPromiseAllSettled ( iteratorRecord, constructor, resultCapability )", "html": "<emu-clause id=\"sec-performpromiseallsettled\" aoid=\"PerformPromiseAllSettled\">\n          <h1><span class=\"secnum excluded-secnum\" excluded-id=\"sec-performpromiseallsettled\">#sec-performpromiseallsettled</span> Runtime Semantics: PerformPromiseAllSettled ( <var>iteratorRecord</var>, <var>constructor</var>, <var>resultCapability</var> )</h1>\n          <p>When the PerformPromiseAllSettled abstract operation is called with arguments <var>iteratorRecord</var>, <var>constructor</var>, and <var>resultCapability</var>, the following steps are taken:</p>\n          <emu-alg><ol><li><emu-xref href=\"#assert\"><a href=\"#assert\">Assert</a></emu-xref>: !&#160;<emu-xref aoid=\"IsConstructor\"><a href=\"#sec-isconstructor\">IsConstructor</a></emu-xref>(<var>constructor</var>) is <emu-val>true</emu-val>.</li><li><emu-xref href=\"#assert\"><a href=\"#assert\">Assert</a></emu-xref>: <var>resultCapability</var> is a PromiseCapability <emu-xref href=\"#sec-list-and-record-specification-type\"><a href=\"#sec-list-and-record-specification-type\">Record</a></emu-xref>.</li><li>Let <var>values</var> be a new empty <emu-xref href=\"#sec-list-and-record-specification-type\"><a href=\"#sec-list-and-record-specification-type\">List</a></emu-xref>.</li><li>Let <var>remainingElementsCount</var> be a new <emu-xref href=\"#sec-list-and-record-specification-type\"><a href=\"#sec-list-and-record-specification-type\">Record</a></emu-xref> { [[Value]]: 1 }.</li><li>Let <var>index</var> be 0.</li><li>Let <var>promiseResolve</var> be ?&#160;<emu-xref aoid=\"Get\"><a href=\"#sec-get-o-p\">Get</a></emu-xref>(<var>constructor</var>, <code>\"resolve\"</code>).</li><li>If <emu-xref aoid=\"IsCallable\"><a href=\"#sec-iscallable\">IsCallable</a></emu-xref>(<var>promiseResolve</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Repeat,<ol><li>Let <var>next</var> be <emu-xref aoid=\"IteratorStep\"><a href=\"#sec-iteratorstep\">IteratorStep</a></emu-xref>(<var>iteratorRecord</var>).</li><li>If <var>next</var> is an <emu-xref href=\"#sec-completion-record-specification-type\"><a href=\"#sec-completion-record-specification-type\">abrupt completion</a></emu-xref>, set <var>iteratorRecord</var>.[[Done]] to <emu-val>true</emu-val>.</li><li><emu-xref aoid=\"ReturnIfAbrupt\"><a href=\"#sec-returnifabrupt\">ReturnIfAbrupt</a></emu-xref>(<var>next</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, then<ol><li>Set <var>iteratorRecord</var>.[[Done]] to <emu-val>true</emu-val>.</li><li>Set <var>remainingElementsCount</var>.[[Value]] to <var>remainingElementsCount</var>.[[Value]] - 1.</li><li>If <var>remainingElementsCount</var>.[[Value]] is 0, then<ol><li>Let <var>valuesArray</var> be !&#160;<emu-xref aoid=\"CreateArrayFromList\"><a href=\"#sec-createarrayfromlist\">CreateArrayFromList</a></emu-xref>(<var>values</var>).</li><li>Perform ?&#160;<emu-xref aoid=\"Call\"><a href=\"#sec-call\">Call</a></emu-xref>(<var>resultCapability</var>.[[Resolve]], <emu-val>undefined</emu-val>, &#171; <var>valuesArray</var> &#187;).</li></ol></li><li>Return <var>resultCapability</var>.[[Promise]].</li></ol></li><li>Let <var>nextValue</var> be <emu-xref aoid=\"IteratorValue\"><a href=\"#sec-iteratorvalue\">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>If <var>nextValue</var> is an <emu-xref href=\"#sec-completion-record-specification-type\"><a href=\"#sec-completion-record-specification-type\">abrupt completion</a></emu-xref>, set <var>iteratorRecord</var>.[[Done]] to <emu-val>true</emu-val>.</li><li><emu-xref aoid=\"ReturnIfAbrupt\"><a href=\"#sec-returnifabrupt\">ReturnIfAbrupt</a></emu-xref>(<var>nextValue</var>).</li><li>Append <emu-val>undefined</emu-val> to <var>values</var>.</li><li>Let <var>nextPromise</var> be ?&#160;<emu-xref aoid=\"Call\"><a href=\"#sec-call\">Call</a></emu-xref>(<var>promiseResolve</var>, <var>constructor</var>, &#171; <var>nextValue</var> &#187;).</li><li>Let <var>steps</var> be the algorithm steps defined in <emu-xref href=\"#sec-promise.allsettled-resolve-element-functions\" title=\"\"><a href=\"#sec-promise.allsettled-resolve-element-functions\"><code>Promise.allSettled</code> Resolve Element Functions</a></emu-xref>.</li><li>Let <var>resolveElement</var> be !&#160;<emu-xref aoid=\"CreateBuiltinFunction\"><a href=\"#sec-createbuiltinfunction\">CreateBuiltinFunction</a></emu-xref>(<var>steps</var>, &#171; [[AlreadyCalled]], [[Index]], [[Values]], [[Capability]], [[RemainingElements]] &#187;).</li><li>Let <var>alreadyCalled</var> be a new <emu-xref href=\"#sec-list-and-record-specification-type\"><a href=\"#sec-list-and-record-specification-type\">Record</a></emu-xref> { [[Value]]: <emu-val>false</emu-val> }.</li><li>Set <var>resolveElement</var>.[[AlreadyCalled]] to <var>alreadyCalled</var>.</li><li>Set <var>resolveElement</var>.[[Index]] to <var>index</var>.</li><li>Set <var>resolveElement</var>.[[Values]] to <var>values</var>.</li><li>Set <var>resolveElement</var>.[[Capability]] to <var>resultCapability</var>.</li><li>Set <var>resolveElement</var>.[[RemainingElements]] to <var>remainingElementsCount</var>.</li><li>Let <var>rejectSteps</var> be the algorithm steps defined in <emu-xref href=\"#sec-promise.allsettled-reject-element-functions\" title=\"\"><a href=\"#sec-promise.allsettled-reject-element-functions\"><code>Promise.allSettled</code> Reject Element Functions</a></emu-xref>.</li><li>Let <var>rejectElement</var> be !&#160;<emu-xref aoid=\"CreateBuiltinFunction\"><a href=\"#sec-createbuiltinfunction\">CreateBuiltinFunction</a></emu-xref>(<var>rejectSteps</var>, &#171; [[AlreadyCalled]], [[Index]], [[Values]], [[Capability]], [[RemainingElements]] &#187;).</li><li>Set <var>rejectElement</var>.[[AlreadyCalled]] to <var>alreadyCalled</var>.</li><li>Set <var>rejectElement</var>.[[Index]] to <var>index</var>.</li><li>Set <var>rejectElement</var>.[[Values]] to <var>values</var>.</li><li>Set <var>rejectElement</var>.[[Capability]] to <var>resultCapability</var>.</li><li>Set <var>rejectElement</var>.[[RemainingElements]] to <var>remainingElementsCount</var>.</li><li>Set <var>remainingElementsCount</var>.[[Value]] to <var>remainingElementsCount</var>.[[Value]] + 1.</li><li>Perform ?&#160;<emu-xref aoid=\"Invoke\"><a href=\"#sec-invoke\">Invoke</a></emu-xref>(<var>nextPromise</var>, <code>\"then\"</code>, &#171; <var>resolveElement</var>, <var>rejectElement</var> &#187;).</li><li>Increase <var>index</var> by 1.\n          </li></ol></li></ol></emu-alg>\n        </emu-clause>\n\n        "}, "sec-promise.allsettled-reject-element-functions": {"num": "25.6.4.2.3", "title": "#sec-promise.allsettled-reject-element-functions Promise.allSettled Reject Element Functions", "html": "<emu-clause id=\"sec-promise.allsettled-reject-element-functions\">\n          <h1><span class=\"secnum excluded-secnum\" excluded-id=\"sec-promise.allsettled-reject-element-functions\">#sec-promise.allsettled-reject-element-functions</span> <code>Promise.allSettled</code> Reject Element Functions</h1>\n          <p>A <code>Promise.allSettled</code> reject element function is an anonymous built-in function that is used to reject a specific <code>Promise.allSettled</code> element. Each <code>Promise.allSettled</code> reject element function has [[Index]], [[Values]], [[Capability]], [[RemainingElements]], and [[AlreadyCalled]] internal slots.</p>\n          <p>When a <code>Promise.allSettled</code> reject element function is called with argument <var>x</var>, the following steps are taken:</p>\n          <emu-alg><ol><li>Let <var>F</var> be the <emu-xref href=\"#active-function-object\"><a href=\"#active-function-object\">active function object</a></emu-xref>.</li><li>Let <var>alreadyCalled</var> be <var>F</var>.[[AlreadyCalled]].</li><li>If <var>alreadyCalled</var>.[[Value]] is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Set <var>alreadyCalled</var>.[[Value]] to <emu-val>true</emu-val>.</li><li>Let <var>index</var> be <var>F</var>.[[Index]].</li><li>Let <var>values</var> be <var>F</var>.[[Values]].</li><li>Let <var>promiseCapability</var> be <var>F</var>.[[Capability]].</li><li>Let <var>remainingElementsCount</var> be <var>F</var>.[[RemainingElements]].</li><li>Let <var>obj</var> be !&#160;<emu-xref aoid=\"ObjectCreate\"><a href=\"#sec-objectcreate\">ObjectCreate</a></emu-xref>(%Object.prototype%).</li><li>Perform !&#160;<emu-xref aoid=\"CreateDataProperty\"><a href=\"#sec-createdataproperty\">CreateDataProperty</a></emu-xref>(<var>obj</var>, <code>\"status\"</code>, <code>\"rejected\"</code>).</li><li>Perform !&#160;<emu-xref aoid=\"CreateDataProperty\"><a href=\"#sec-createdataproperty\">CreateDataProperty</a></emu-xref>(<var>obj</var>, <code>\"reason\"</code>, <var>x</var>).</li><li>Set <var>values</var>[<var>index</var>] to be <var>obj</var>.</li><li>Set <var>remainingElementsCount</var>.[[Value]] to <var>remainingElementsCount</var>.[[Value]] - 1.</li><li>If <var>remainingElementsCount</var>.[[Value]] is 0, then<ol><li>Let <var>valuesArray</var> be !&#160;<emu-xref aoid=\"CreateArrayFromList\"><a href=\"#sec-createarrayfromlist\">CreateArrayFromList</a></emu-xref>(<var>values</var>).</li><li>Return ?&#160;<emu-xref aoid=\"Call\"><a href=\"#sec-call\">Call</a></emu-xref>(<var>promiseCapability</var>.[[Resolve]], <emu-val>undefined</emu-val>, &#171; <var>valuesArray</var> &#187;).</li></ol></li><li>Return <emu-val>undefined</emu-val>.\n          </li></ol></emu-alg>\n          <p>The <code>\"length\"</code> property of a <code>Promise.allSettled</code> reject element function is 1.</p>\n        </emu-clause>\n      "}}, "figData": {}}, "to": {"secList": ["sec-promise.allsettled-resolve-element-functions", "sec-performpromiseallsettled", "sec-promise.allsettled-reject-element-functions"], "secData": {"sec-promise.allsettled-resolve-element-functions": {"num": "25.6.4.2.2", "title": "#sec-promise.allsettled-resolve-element-functions Promise.allSettled Resolve Element Functions", "html": "<emu-clause id=\"sec-promise.allsettled-resolve-element-functions\">\n          <h1><span class=\"secnum excluded-secnum\" excluded-id=\"sec-promise.allsettled-resolve-element-functions\">#sec-promise.allsettled-resolve-element-functions</span> <code>Promise.allSettled</code> Resolve Element Functions</h1>\n          <p>A <code>Promise.allSettled</code> resolve element function is an anonymous built-in function that is used to resolve a specific <code>Promise.allSettled</code> element. Each <code>Promise.allSettled</code> resolve element function has [[Index]], [[Values]], [[Capability]], [[RemainingElements]], and [[AlreadyCalled]] internal slots.</p>\n          <p>When a <code>Promise.allSettled</code> resolve element function is called with argument <var>x</var>, the following steps are taken:</p>\n          <emu-alg><ol><li>Let <var>F</var> be the <emu-xref href=\"#active-function-object\"><a href=\"#active-function-object\">active function object</a></emu-xref>.</li><li>Let <var>alreadyCalled</var> be <var>F</var>.[[AlreadyCalled]].</li><li>If <var>alreadyCalled</var>.[[Value]] is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Set <var>alreadyCalled</var>.[[Value]] to <emu-val>true</emu-val>.</li><li>Let <var>index</var> be <var>F</var>.[[Index]].</li><li>Let <var>values</var> be <var>F</var>.[[Values]].</li><li>Let <var>promiseCapability</var> be <var>F</var>.[[Capability]].</li><li>Let <var>remainingElementsCount</var> be <var>F</var>.[[RemainingElements]].</li><li>Let <var>obj</var> be !&#160;<emu-xref aoid=\"ObjectCreate\"><a href=\"#sec-objectcreate\">ObjectCreate</a></emu-xref>(%Object.prototype%).</li><li>Perform !&#160;<emu-xref aoid=\"CreateDataProperty\"><a href=\"#sec-createdataproperty\">CreateDataProperty</a></emu-xref>(<var>obj</var>, <code>\"status\"</code>, <code>\"fulfilled\"</code>).</li><li>Perform !&#160;<emu-xref aoid=\"CreateDataProperty\"><a href=\"#sec-createdataproperty\">CreateDataProperty</a></emu-xref>(<var>obj</var>, <code>\"value\"</code>, <var>x</var>).</li><li>Set <var>values</var>[<var>index</var>] to <var>obj</var>.</li><li>Set <var>remainingElementsCount</var>.[[Value]] to <var>remainingElementsCount</var>.[[Value]] - 1.</li><li>If <var>remainingElementsCount</var>.[[Value]] is 0, then<ol><li>Let <var>valuesArray</var> be !&#160;<emu-xref aoid=\"CreateArrayFromList\"><a href=\"#sec-createarrayfromlist\">CreateArrayFromList</a></emu-xref>(<var>values</var>).</li><li>Return ?&#160;<emu-xref aoid=\"Call\"><a href=\"#sec-call\">Call</a></emu-xref>(<var>promiseCapability</var>.[[Resolve]], <emu-val>undefined</emu-val>, &#171; <var>valuesArray</var> &#187;).</li></ol></li><li>Return <emu-val>undefined</emu-val>.\n          </li></ol></emu-alg>\n          <p>The <code>\"length\"</code> property of a <code>Promise.allSettled</code> resolve element function is 1.</p>\n        </emu-clause>\n\n        "}, "sec-performpromiseallsettled": {"num": "25.6.4.2.1", "title": "#sec-performpromiseallsettled Runtime Semantics: PerformPromiseAllSettled ( iteratorRecord, constructor, resultCapability )", "html": "<emu-clause id=\"sec-performpromiseallsettled\" aoid=\"PerformPromiseAllSettled\">\n          <h1><span class=\"secnum excluded-secnum\" excluded-id=\"sec-performpromiseallsettled\">#sec-performpromiseallsettled</span> Runtime Semantics: PerformPromiseAllSettled ( <var>iteratorRecord</var>, <var>constructor</var>, <var>resultCapability</var> )</h1>\n          <p>When the PerformPromiseAllSettled abstract operation is called with arguments <var>iteratorRecord</var>, <var>constructor</var>, and <var>resultCapability</var>, the following steps are taken:</p>\n          <emu-alg><ol><li><emu-xref href=\"#assert\"><a href=\"#assert\">Assert</a></emu-xref>: !&#160;<emu-xref aoid=\"IsConstructor\"><a href=\"#sec-isconstructor\">IsConstructor</a></emu-xref>(<var>constructor</var>) is <emu-val>true</emu-val>.</li><li><emu-xref href=\"#assert\"><a href=\"#assert\">Assert</a></emu-xref>: <var>resultCapability</var> is a PromiseCapability <emu-xref href=\"#sec-list-and-record-specification-type\"><a href=\"#sec-list-and-record-specification-type\">Record</a></emu-xref>.</li><li>Let <var>values</var> be a new empty <emu-xref href=\"#sec-list-and-record-specification-type\"><a href=\"#sec-list-and-record-specification-type\">List</a></emu-xref>.</li><li>Let <var>remainingElementsCount</var> be the <emu-xref href=\"#sec-list-and-record-specification-type\"><a href=\"#sec-list-and-record-specification-type\">Record</a></emu-xref> { [[Value]]: 1 }.</li><li>Let <var>index</var> be 0.</li><li>Let <var>promiseResolve</var> be ?&#160;<emu-xref aoid=\"Get\"><a href=\"#sec-get-o-p\">Get</a></emu-xref>(<var>constructor</var>, <code>\"resolve\"</code>).</li><li>If <emu-xref aoid=\"IsCallable\"><a href=\"#sec-iscallable\">IsCallable</a></emu-xref>(<var>promiseResolve</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Repeat,<ol><li>Let <var>next</var> be <emu-xref aoid=\"IteratorStep\"><a href=\"#sec-iteratorstep\">IteratorStep</a></emu-xref>(<var>iteratorRecord</var>).</li><li>If <var>next</var> is an <emu-xref href=\"#sec-completion-record-specification-type\"><a href=\"#sec-completion-record-specification-type\">abrupt completion</a></emu-xref>, set <var>iteratorRecord</var>.[[Done]] to <emu-val>true</emu-val>.</li><li><emu-xref aoid=\"ReturnIfAbrupt\"><a href=\"#sec-returnifabrupt\">ReturnIfAbrupt</a></emu-xref>(<var>next</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, then<ol><li>Set <var>iteratorRecord</var>.[[Done]] to <emu-val>true</emu-val>.</li><li>Set <var>remainingElementsCount</var>.[[Value]] to <var>remainingElementsCount</var>.[[Value]] - 1.</li><li>If <var>remainingElementsCount</var>.[[Value]] is 0, then<ol><li>Let <var>valuesArray</var> be !&#160;<emu-xref aoid=\"CreateArrayFromList\"><a href=\"#sec-createarrayfromlist\">CreateArrayFromList</a></emu-xref>(<var>values</var>).</li><li>Perform ?&#160;<emu-xref aoid=\"Call\"><a href=\"#sec-call\">Call</a></emu-xref>(<var>resultCapability</var>.[[Resolve]], <emu-val>undefined</emu-val>, &#171; <var>valuesArray</var> &#187;).</li></ol></li><li>Return <var>resultCapability</var>.[[Promise]].</li></ol></li><li>Let <var>nextValue</var> be <emu-xref aoid=\"IteratorValue\"><a href=\"#sec-iteratorvalue\">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>If <var>nextValue</var> is an <emu-xref href=\"#sec-completion-record-specification-type\"><a href=\"#sec-completion-record-specification-type\">abrupt completion</a></emu-xref>, set <var>iteratorRecord</var>.[[Done]] to <emu-val>true</emu-val>.</li><li><emu-xref aoid=\"ReturnIfAbrupt\"><a href=\"#sec-returnifabrupt\">ReturnIfAbrupt</a></emu-xref>(<var>nextValue</var>).</li><li>Append <emu-val>undefined</emu-val> to <var>values</var>.</li><li>Let <var>nextPromise</var> be ?&#160;<emu-xref aoid=\"Call\"><a href=\"#sec-call\">Call</a></emu-xref>(<var>promiseResolve</var>, <var>constructor</var>, &#171; <var>nextValue</var> &#187;).</li><li>Let <var>steps</var> be the algorithm steps defined in <emu-xref href=\"#sec-promise.allsettled-resolve-element-functions\" title=\"\"><a href=\"#sec-promise.allsettled-resolve-element-functions\"><code>Promise.allSettled</code> Resolve Element Functions</a></emu-xref>.</li><li>Let <var>resolveElement</var> be !&#160;<emu-xref aoid=\"CreateBuiltinFunction\"><a href=\"#sec-createbuiltinfunction\">CreateBuiltinFunction</a></emu-xref>(<var>steps</var>, &#171; [[AlreadyCalled]], [[Index]], [[Values]], [[Capability]], [[RemainingElements]] &#187;).</li><li>Let <var>alreadyCalled</var> be the <emu-xref href=\"#sec-list-and-record-specification-type\"><a href=\"#sec-list-and-record-specification-type\">Record</a></emu-xref> { [[Value]]: <emu-val>false</emu-val> }.</li><li>Set <var>resolveElement</var>.[[AlreadyCalled]] to <var>alreadyCalled</var>.</li><li>Set <var>resolveElement</var>.[[Index]] to <var>index</var>.</li><li>Set <var>resolveElement</var>.[[Values]] to <var>values</var>.</li><li>Set <var>resolveElement</var>.[[Capability]] to <var>resultCapability</var>.</li><li>Set <var>resolveElement</var>.[[RemainingElements]] to <var>remainingElementsCount</var>.</li><li>Let <var>rejectSteps</var> be the algorithm steps defined in <emu-xref href=\"#sec-promise.allsettled-reject-element-functions\" title=\"\"><a href=\"#sec-promise.allsettled-reject-element-functions\"><code>Promise.allSettled</code> Reject Element Functions</a></emu-xref>.</li><li>Let <var>rejectElement</var> be !&#160;<emu-xref aoid=\"CreateBuiltinFunction\"><a href=\"#sec-createbuiltinfunction\">CreateBuiltinFunction</a></emu-xref>(<var>rejectSteps</var>, &#171; [[AlreadyCalled]], [[Index]], [[Values]], [[Capability]], [[RemainingElements]] &#187;).</li><li>Set <var>rejectElement</var>.[[AlreadyCalled]] to <var>alreadyCalled</var>.</li><li>Set <var>rejectElement</var>.[[Index]] to <var>index</var>.</li><li>Set <var>rejectElement</var>.[[Values]] to <var>values</var>.</li><li>Set <var>rejectElement</var>.[[Capability]] to <var>resultCapability</var>.</li><li>Set <var>rejectElement</var>.[[RemainingElements]] to <var>remainingElementsCount</var>.</li><li>Set <var>remainingElementsCount</var>.[[Value]] to <var>remainingElementsCount</var>.[[Value]] + 1.</li><li>Perform ?&#160;<emu-xref aoid=\"Invoke\"><a href=\"#sec-invoke\">Invoke</a></emu-xref>(<var>nextPromise</var>, <code>\"then\"</code>, &#171; <var>resolveElement</var>, <var>rejectElement</var> &#187;).</li><li>Set <var>index</var> to <var>index</var> + 1.\n          </li></ol></li></ol></emu-alg>\n        </emu-clause>\n\n        "}, "sec-promise.allsettled-reject-element-functions": {"num": "25.6.4.2.3", "title": "#sec-promise.allsettled-reject-element-functions Promise.allSettled Reject Element Functions", "html": "<emu-clause id=\"sec-promise.allsettled-reject-element-functions\">\n          <h1><span class=\"secnum excluded-secnum\" excluded-id=\"sec-promise.allsettled-reject-element-functions\">#sec-promise.allsettled-reject-element-functions</span> <code>Promise.allSettled</code> Reject Element Functions</h1>\n          <p>A <code>Promise.allSettled</code> reject element function is an anonymous built-in function that is used to reject a specific <code>Promise.allSettled</code> element. Each <code>Promise.allSettled</code> reject element function has [[Index]], [[Values]], [[Capability]], [[RemainingElements]], and [[AlreadyCalled]] internal slots.</p>\n          <p>When a <code>Promise.allSettled</code> reject element function is called with argument <var>x</var>, the following steps are taken:</p>\n          <emu-alg><ol><li>Let <var>F</var> be the <emu-xref href=\"#active-function-object\"><a href=\"#active-function-object\">active function object</a></emu-xref>.</li><li>Let <var>alreadyCalled</var> be <var>F</var>.[[AlreadyCalled]].</li><li>If <var>alreadyCalled</var>.[[Value]] is <emu-val>true</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Set <var>alreadyCalled</var>.[[Value]] to <emu-val>true</emu-val>.</li><li>Let <var>index</var> be <var>F</var>.[[Index]].</li><li>Let <var>values</var> be <var>F</var>.[[Values]].</li><li>Let <var>promiseCapability</var> be <var>F</var>.[[Capability]].</li><li>Let <var>remainingElementsCount</var> be <var>F</var>.[[RemainingElements]].</li><li>Let <var>obj</var> be !&#160;<emu-xref aoid=\"ObjectCreate\"><a href=\"#sec-objectcreate\">ObjectCreate</a></emu-xref>(%Object.prototype%).</li><li>Perform !&#160;<emu-xref aoid=\"CreateDataProperty\"><a href=\"#sec-createdataproperty\">CreateDataProperty</a></emu-xref>(<var>obj</var>, <code>\"status\"</code>, <code>\"rejected\"</code>).</li><li>Perform !&#160;<emu-xref aoid=\"CreateDataProperty\"><a href=\"#sec-createdataproperty\">CreateDataProperty</a></emu-xref>(<var>obj</var>, <code>\"reason\"</code>, <var>x</var>).</li><li>Set <var>values</var>[<var>index</var>] to <var>obj</var>.</li><li>Set <var>remainingElementsCount</var>.[[Value]] to <var>remainingElementsCount</var>.[[Value]] - 1.</li><li>If <var>remainingElementsCount</var>.[[Value]] is 0, then<ol><li>Let <var>valuesArray</var> be !&#160;<emu-xref aoid=\"CreateArrayFromList\"><a href=\"#sec-createarrayfromlist\">CreateArrayFromList</a></emu-xref>(<var>values</var>).</li><li>Return ?&#160;<emu-xref aoid=\"Call\"><a href=\"#sec-call\">Call</a></emu-xref>(<var>promiseCapability</var>.[[Resolve]], <emu-val>undefined</emu-val>, &#171; <var>valuesArray</var> &#187;).</li></ol></li><li>Return <emu-val>undefined</emu-val>.\n          </li></ol></emu-alg>\n          <p>The <code>\"length\"</code> property of a <code>Promise.allSettled</code> reject element function is 1.</p>\n        </emu-clause>\n      "}}, "figData": {}}}