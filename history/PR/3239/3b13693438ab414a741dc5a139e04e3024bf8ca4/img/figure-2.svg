<?xml version="1.0"?>
<svg xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     width="900" height="660">
  <style type="text/css">
    rect.box {
      fill: #ffffff;
    }

    rect.class {
      -fill: #cceecc;
      fill: #e6f7e6;
      stroke: black;
      stroke-width: 1.2px;
    }
    rect.object {
      fill: #ffffff;
      stroke: black;
      stroke-width: 1.2px;
    }
    path.note {
      fill: #fff7f7;
      stroke: black;
      stroke-width: 1.2px;
    }

    path.proto-slot-arrow {
      fill: none;
      stroke: black;
      stroke-width: 1.2px;
      marker-end: url(#proto-slot-arrowend);
    }
    path.proto-slot-arrowend {
      fill: white;
      stroke: black;
      stroke-width: 1.2px;
    }

    path.prototype-arrow {
      fill: none;
      stroke: black;
      stroke-width: 1.2px;
      marker-end: url(#prototype-arrowend);
    }
    path.prototype-constructor-arrow {
      fill: none;
      stroke: black;
      stroke-width: 1.2px;
      marker-start: url(#prototype-arrowstart);
      marker-end: url(#prototype-arrowend);
    }
    path.prototype-arrowend {
      fill: none;
      stroke: black;
      stroke-width: 1.2px;
    }

    path.instance-arrow {
      fill: none;
      stroke: black;
      stroke-width: 1.2px;
      stroke-dasharray: 6, 6;
      marker-end: url(#prototype-arrowend);
    }

    path.note-arrow {
      stroke: black;
      stroke-width: 1.2px;
      stroke-dasharray: 6, 6;
    }

    text { font-family: Helvetica, Arial, Liberation Sans, sans-serif; }
    text { font-size: 14px; }
    text.small { font-size: 13px; }
  </style>
  <g>
    <rect class="box" x="0" y="0" width="900" height="660" />

    <!-- classes -->

    <g transform="translate(370,90)">
      <rect class="class" x="0" y="0" width="160" height="30" />
      <g transform="translate(0,4)">
        <text x="80" y="16" text-anchor="middle">Object.prototype</text>
      </g>
    </g>

    <g transform="translate(370,160)">
      <rect class="class" x="0" y="0" width="160" height="24" />
      <rect class="class" x="0" y="24" width="160" height="76" />
      <g transform="translate(0,4)">
        <text x="80" y="16" text-anchor="middle">Function.prototype</text>
      </g>
      <g transform="translate(4,24)">
        <text x="0" y="16">@@hasInstance()</text>
        <text x="0" y="32">apply()</text>
        <text x="0" y="48">bind()</text>
        <text x="0" y="64">call()</text>
      </g>
    </g>

    <g transform="translate(320,290)">
      <rect class="class" x="0" y="0" width="210" height="24" />
      <rect class="class" x="0" y="24" width="210" height="36" />
      <g transform="translate(0,4)">
        <text x="105" y="16" text-anchor="middle" class="small">%GeneratorFunction.prototype%</text>
      </g>
      <g transform="translate(4,24)">
        <text x="0" y="16">@@toStringTag =</text>
        <text x="16" y="32">"GeneratorFunction"</text>
      </g>
    </g>

    <g transform="translate(20,200)">
      <rect class="class" x="0" y="0" width="160" height="60" />
      <g transform="translate(0,4)">
        <text x="80" y="16" text-anchor="middle">«constructor»</text>
        <text x="80" y="32" text-anchor="middle">«callable»</text>
        <text x="80" y="48" text-anchor="middle">Function</text>
      </g>
    </g>

    <g transform="translate(20,290)">
      <rect class="class" x="0" y="0" width="160" height="60" />
      <g transform="translate(0,4)">
        <text x="80" y="16" text-anchor="middle">«constructor»</text>
        <text x="80" y="32" text-anchor="middle">«callable»</text>
        <text x="80" y="48" text-anchor="middle">%GeneratorFunction%</text>
      </g>
    </g>

    <g transform="translate(720,120)">
      <rect class="class" x="0" y="0" width="160" height="24" />
      <rect class="class" x="0" y="24" width="160" height="24" />
      <g transform="translate(0,4)">
        <text x="80" y="16" text-anchor="middle">%IteratorPrototype%</text>
      </g>
      <g transform="translate(4,24)">
        <text x="0" y="16">@@iterator() : object</text>
      </g>
    </g>

    <g transform="translate(640,290)">
      <rect class="class" x="0" y="0" width="250" height="24" />
      <rect class="class" x="0" y="24" width="250" height="24" />
      <rect class="class" x="0" y="48" width="250" height="52" />
      <g transform="translate(0,4)">
        <text x="125" y="16" text-anchor="middle" class="small">%GeneratorFunction.prototype.prototype%</text>
      </g>
      <g transform="translate(4,26)">
        <text x="0" y="16">@@toStringTag = "Generator"</text>
      </g>
      <g transform="translate(4,48)">
        <text x="0" y="16">next() : object</text>
        <text x="0" y="32">return()</text>
        <text x="0" y="48">throw()</text>
      </g>
    </g>

    <!-- objects -->

    <g transform="translate(370,440)">
      <rect class="object" x="0" y="0" width="160" height="50" />
      <g transform="translate(0,4)">
        <text x="80" y="16" text-anchor="middle">«callable»</text>
        <text x="80" y="32" text-anchor="middle">function *g1() { yield; }</text>
      </g>
    </g>

    <g transform="translate(720,440)">
      <rect class="object" x="0" y="0" width="160" height="30" />
      <g transform="translate(0,4)">
        <text x="80" y="16" text-anchor="middle">g1.prototype</text>
      </g>
    </g>

    <g transform="translate(720,520)">
      <rect class="object" x="0" y="0" width="160" height="30" />
      <g transform="translate(0,4)">
        <text x="80" y="16" text-anchor="middle">g1()</text>
      </g>
    </g>

    <!-- notes -->

    <g transform="translate(370,20)">
      <path class="note" d="M 0,0 H 150 l 0,10 0,-10 10,10 -10,0 10,0 V 50 H 0 z" />
      <g transform="translate(4,4)">
        <text x="0" y="16">[[Prototype]] of</text>
        <text x="0" y="32">Object.prototype is null</text>
      </g>
    </g>

    <g transform="translate(550,190)">
      <path class="note" d="M 0,0 H 200 l 0,10 0,-10 10,10 -10,0 10,0 V 90 H 0 z" />
      <g transform="translate(4,4)">
        <text x="0" y="16" class="small">%GeneratorFunction.prototype%</text>
        <text x="0" y="32">is an ordinary object that serves</text>
        <text x="0" y="48">as the abstract constructor of</text>
        <text x="0" y="64">Generator instances.</text>
      </g>
    </g>

    <g transform="translate(20,370)">
      <path class="note" d="M 0,0 H 185 l 0,10 0,-10 10,10 -10,0 10,0 V 190 H 0 z" />
      <g transform="translate(4,4)">
        <text x="0" y="16">%GeneratorFunction% and</text>
        <text x="0" y="32" class="small">%GeneratorFunction.prototype%</text>
        <text x="0" y="48">do not have global names.</text>
        <text x="0" y="80">%GeneratorFunction% is</text>
        <text x="0" y="96">essentially a subclass of</text>
        <text x="0" y="112">Function and is structured as</text>
        <text x="0" y="128">if it were declared as:</text>
        <text x="8" y="160">class extends Function { }</text>
      </g>
    </g>

    <g transform="translate(220,450)">
      <path class="note" d="M 0,0 H 130 l 0,10 0,-10 10,10 -10,0 10,0 V 60 H 0 z" />
      <g transform="translate(4,4)">
        <text x="0" y="16">A typical generator</text>
        <text x="0" y="32">function. It is not a</text>
        <text x="0" y="48">constructor.</text>
      </g>
    </g>

    <g transform="translate(320,520)">
      <path class="note" d="M 0,0 H 370 l 0,10 0,-10 10,10 -10,0 10,0 V 120 H 0 z" />
      <g transform="translate(4,4)">
        <text x="0" y="16">Each Generator Function has an associated prototype</text>
        <text x="0" y="32">that does not have a constructor property. Hence a</text>
        <text x="0" y="48">generator instance does not expose access to its generator</text>
        <text x="0" y="64">function.</text>
        <text x="0" y="96">But the prototype may be used to add additional</text>
        <text x="0" y="112">behavior to its generator function's instances.</text>
      </g>
    </g>

    <!-- proto-slot arrows -->

    <marker id="proto-slot-arrowend" viewBox="0 0 10 10" refX="10" refY="5"
        markerUnits="userSpaceOnUse" markerWidth="14" markerHeight="14"
        orient="auto">
      <path class="proto-slot-arrowend" d="M 0,0 L 9,5 L 0,10 z" />
    </marker>

    <path class="proto-slot-arrow" d="M 470,160 V 120" />
    <path class="proto-slot-arrow" d="M 470,290 V 260" />
    <path class="proto-slot-arrow" d="M 470,440 V 350" />

    <path class="proto-slot-arrow" d="M 120,200 V 180 H 370" />
    <path class="proto-slot-arrow" d="M 120,290 V 260" />

    <path class="proto-slot-arrow" d="M 800,120 V 100 H 530" />
    <path class="proto-slot-arrow" d="M 800,290 V 170" />
    <path class="proto-slot-arrow" d="M 800,440 V 390" />
    <path class="proto-slot-arrow" d="M 800,520 V 470" />

    <!-- prototype/constructor arrows -->

    <marker id="prototype-arrowstart" viewBox="0 0 10 10" refX="0" refY="5"
        markerUnits="userSpaceOnUse" markerWidth="14" markerHeight="14"
        orient="auto">
      <path class="prototype-arrowend" d="M 10,0 L 1,5 L 10,10" />
    </marker>

    <marker id="prototype-arrowend" viewBox="0 0 10 10" refX="10" refY="5"
        markerUnits="userSpaceOnUse" markerWidth="14" markerHeight="14"
        orient="auto">
      <path class="prototype-arrowend" d="M 0,0 L 9,5 L 0,10" />
    </marker>

    <path class="prototype-constructor-arrow" d="M 180,330 H 320" />
    <text x="240" y="322">constructor</text>
    <text x="200" y="348">prototype</text>

    <path class="prototype-constructor-arrow" d="M 530,330 H 640" />
    <text x="560" y="322">constructor</text>
    <text x="540" y="348">prototype</text>

    <path class="prototype-arrow" d="M 530,460 H 720" />
    <text x="550" y="473">prototype</text>

    <!-- instance arrows -->

    <path class="instance-arrow" d="M 370,440 L 180,340" />
    <text x="335" y="420">instanceof</text>

    <path class="instance-arrow" d="M 720,520 L 530,480" />
    <text x="655" y="505">instanceof</text>

    <!-- note arrows -->

    <path class="note-arrow" d="M 470,70 V 90" />
    <path class="note-arrow" d="M 530,290 L 550,260" />
    <path class="note-arrow" d="M 120,370 V 350" />
    <path class="note-arrow" d="M 360,470 H 370" />
    <path class="note-arrow" d="M 700,540 H 720" />
  </g>
</svg>
