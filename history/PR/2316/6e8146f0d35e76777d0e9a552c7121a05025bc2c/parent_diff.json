{"from": {"secList": ["sec-finalization-registry-cleanup-callback", "sec-cleanup-finalization-registry"], "secData": {"sec-finalization-registry-cleanup-callback": {"num": "26.2.1.1", "title": "#sec-finalization-registry-cleanup-callback FinalizationRegistry ( cleanupCallback )", "html": "<emu-clause id=\"sec-finalization-registry-cleanup-callback\">\n        <h1><span class=\"secnum excluded-secnum\" excluded-id=\"sec-finalization-registry-cleanup-callback\">#sec-finalization-registry-cleanup-callback</span> FinalizationRegistry ( <var>cleanupCallback</var> )</h1>\n        <p>When the <code>FinalizationRegistry</code> function is called with argument <var>cleanupCallback</var>, the following steps are taken:</p>\n        <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <emu-xref aoid=\"IsCallable\"><a href=\"#sec-iscallable\">IsCallable</a></emu-xref>(<var>cleanupCallback</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>finalizationRegistry</var> be ?&#160;<emu-xref aoid=\"OrdinaryCreateFromConstructor\"><a href=\"#sec-ordinarycreatefromconstructor\">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>\"%FinalizationRegistry.prototype%\"</emu-val>, &#171; [[Realm]], [[CleanupCallback]], [[Cells]] &#187;).</li><li>Let <var>fn</var> be the <emu-xref href=\"#active-function-object\"><a href=\"#active-function-object\">active function object</a></emu-xref>.</li><li>Set <var>finalizationRegistry</var>.[[Realm]] to <var>fn</var>.[[Realm]].</li><li>Set <var>finalizationRegistry</var>.[[CleanupCallback]] to <var>cleanupCallback</var>.</li><li>Set <var>finalizationRegistry</var>.[[Cells]] to a new empty <emu-xref href=\"#sec-list-and-record-specification-type\"><a href=\"#sec-list-and-record-specification-type\">List</a></emu-xref>.</li><li>Return <var>finalizationRegistry</var>.</li></ol></emu-alg>\n      </emu-clause>\n    "}, "sec-cleanup-finalization-registry": {"num": "9.12", "title": "#sec-cleanup-finalization-registry CleanupFinalizationRegistry ( finalizationRegistry )", "html": "<emu-clause id=\"sec-cleanup-finalization-registry\" aoid=\"CleanupFinalizationRegistry\">\n    <h1><span class=\"secnum excluded-secnum\" excluded-id=\"sec-cleanup-finalization-registry\">#sec-cleanup-finalization-registry</span> CleanupFinalizationRegistry ( <var>finalizationRegistry</var> )</h1>\n    <p>The abstract operation CleanupFinalizationRegistry takes argument <var>finalizationRegistry</var> (a <emu-xref href=\"#sec-finalization-registry-constructor\"><a href=\"#sec-finalization-registry-constructor\">FinalizationRegistry</a></emu-xref>). It performs the following steps when called:</p>\n    <emu-alg><ol><li><emu-xref href=\"#assert\"><a href=\"#assert\">Assert</a></emu-xref>: <var>finalizationRegistry</var> has [[Cells]] and [[CleanupCallback]] internal slots.</li><li>Let <var>callback</var> be <var>finalizationRegistry</var>.[[CleanupCallback]].</li><li>While <var>finalizationRegistry</var>.[[Cells]] contains a <emu-xref href=\"#sec-list-and-record-specification-type\"><a href=\"#sec-list-and-record-specification-type\">Record</a></emu-xref> <var>cell</var> such that <var>cell</var>.[[WeakRefTarget]] is <emu-const>empty</emu-const>, an implementation may perform the following steps:<ol><li>Choose any such <var>cell</var>.</li><li>Remove <var>cell</var> from <var>finalizationRegistry</var>.[[Cells]].</li><li>Perform ?&#160;<emu-xref aoid=\"Call\"><a href=\"#sec-call\">Call</a></emu-xref>(<var>callback</var>, <emu-val>undefined</emu-val>, &#171; <var>cell</var>.[[HeldValue]] &#187;).</li></ol></li><li>Return <emu-xref aoid=\"NormalCompletion\"><a href=\"#sec-normalcompletion\">NormalCompletion</a></emu-xref>(<emu-val>undefined</emu-val>).</li></ol></emu-alg>\n  </emu-clause>\n"}}, "figData": {}}, "to": {"secList": ["sec-finalization-registry-cleanup-callback", "sec-cleanup-finalization-registry"], "secData": {"sec-finalization-registry-cleanup-callback": {"num": "26.2.1.1", "title": "#sec-finalization-registry-cleanup-callback FinalizationRegistry ( cleanupCallback )", "html": "<emu-clause id=\"sec-finalization-registry-cleanup-callback\">\n        <h1><span class=\"secnum excluded-secnum\" excluded-id=\"sec-finalization-registry-cleanup-callback\">#sec-finalization-registry-cleanup-callback</span> FinalizationRegistry ( <var>cleanupCallback</var> )</h1>\n        <p>When the <code>FinalizationRegistry</code> function is called with argument <var>cleanupCallback</var>, the following steps are taken:</p>\n        <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <emu-xref aoid=\"IsCallable\"><a href=\"#sec-iscallable\">IsCallable</a></emu-xref>(<var>cleanupCallback</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>finalizationRegistry</var> be ?&#160;<emu-xref aoid=\"OrdinaryCreateFromConstructor\"><a href=\"#sec-ordinarycreatefromconstructor\">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>\"%FinalizationRegistry.prototype%\"</emu-val>, &#171; [[Realm]], [[CleanupCallback]], [[Cells]] &#187;).</li><li>Let <var>fn</var> be the <emu-xref href=\"#active-function-object\"><a href=\"#active-function-object\">active function object</a></emu-xref>.</li><li>Set <var>finalizationRegistry</var>.[[Realm]] to <var>fn</var>.[[Realm]].</li><li>Set <var>finalizationRegistry</var>.[[CleanupCallback]] to <emu-xref aoid=\"HostMakeJobCallback\"><a href=\"#sec-hostmakejobcallback\">HostMakeJobCallback</a></emu-xref>(<var>cleanupCallback</var>).</li><li>Set <var>finalizationRegistry</var>.[[Cells]] to a new empty <emu-xref href=\"#sec-list-and-record-specification-type\"><a href=\"#sec-list-and-record-specification-type\">List</a></emu-xref>.</li><li>Return <var>finalizationRegistry</var>.</li></ol></emu-alg>\n      </emu-clause>\n    "}, "sec-cleanup-finalization-registry": {"num": "9.12", "title": "#sec-cleanup-finalization-registry CleanupFinalizationRegistry ( finalizationRegistry )", "html": "<emu-clause id=\"sec-cleanup-finalization-registry\" aoid=\"CleanupFinalizationRegistry\">\n    <h1><span class=\"secnum excluded-secnum\" excluded-id=\"sec-cleanup-finalization-registry\">#sec-cleanup-finalization-registry</span> CleanupFinalizationRegistry ( <var>finalizationRegistry</var> )</h1>\n    <p>The abstract operation CleanupFinalizationRegistry takes argument <var>finalizationRegistry</var> (a <emu-xref href=\"#sec-finalization-registry-constructor\"><a href=\"#sec-finalization-registry-constructor\">FinalizationRegistry</a></emu-xref>). It performs the following steps when called:</p>\n    <emu-alg><ol><li><emu-xref href=\"#assert\"><a href=\"#assert\">Assert</a></emu-xref>: <var>finalizationRegistry</var> has [[Cells]] and [[CleanupCallback]] internal slots.</li><li>Let <var>callback</var> be <var>finalizationRegistry</var>.[[CleanupCallback]].</li><li>While <var>finalizationRegistry</var>.[[Cells]] contains a <emu-xref href=\"#sec-list-and-record-specification-type\"><a href=\"#sec-list-and-record-specification-type\">Record</a></emu-xref> <var>cell</var> such that <var>cell</var>.[[WeakRefTarget]] is <emu-const>empty</emu-const>, an implementation may perform the following steps:<ol><li>Choose any such <var>cell</var>.</li><li>Remove <var>cell</var> from <var>finalizationRegistry</var>.[[Cells]].</li><li>Perform ?&#160;<emu-xref aoid=\"HostCallJobCallback\"><a href=\"#sec-hostcalljobcallback\">HostCallJobCallback</a></emu-xref>(<var>callback</var>, <emu-val>undefined</emu-val>, &#171; <var>cell</var>.[[HeldValue]] &#187;).</li></ol></li><li>Return <emu-xref aoid=\"NormalCompletion\"><a href=\"#sec-normalcompletion\">NormalCompletion</a></emu-xref>(<emu-val>undefined</emu-val>).</li></ol></emu-alg>\n  </emu-clause>\n"}}, "figData": {}}}