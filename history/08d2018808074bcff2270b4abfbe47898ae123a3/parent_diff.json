{"from": {"secList": ["sec-proxy-revocation-functions", "sec-proxy.revocable"], "secData": {"sec-proxy-revocation-functions": {"num": "28.2.2.1.1", "title": "#sec-proxy-revocation-functions Proxy Revocation Functions", "html": "<emu-clause id=\"sec-proxy-revocation-functions\">\n          <h1><span class=\"secnum excluded-secnum\" excluded-id=\"sec-proxy-revocation-functions\">#sec-proxy-revocation-functions</span> Proxy Revocation Functions</h1>\n          <p>A Proxy revocation function is an anonymous built-in function that has the ability to invalidate a specific Proxy object.</p>\n          <p>Each Proxy revocation function has a [[RevocableProxy]] internal slot.</p>\n          <p>When a Proxy revocation function is called, the following steps are taken:</p>\n          <emu-alg><ol><li>Let <var>F</var> be the <emu-xref href=\"#active-function-object\"><a href=\"#active-function-object\">active function object</a></emu-xref>.</li><li>Let <var>p</var> be <var>F</var>.[[RevocableProxy]].</li><li>If <var>p</var> is <emu-val>null</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Set <var>F</var>.[[RevocableProxy]] to <emu-val>null</emu-val>.</li><li><emu-xref href=\"#assert\"><a href=\"#assert\">Assert</a></emu-xref>: <var>p</var> is a Proxy object.</li><li>Set <var>p</var>.[[ProxyTarget]] to <emu-val>null</emu-val>.</li><li>Set <var>p</var>.[[ProxyHandler]] to <emu-val>null</emu-val>.</li><li>Return <emu-val>undefined</emu-val>.</li></ol></emu-alg>\n          <p>The <emu-val>\"length\"</emu-val> property of a Proxy revocation function is <emu-val>+0</emu-val><sub>&#120125;</sub>.</p>\n        </emu-clause>\n      "}, "sec-proxy.revocable": {"num": "28.2.2.1", "title": "#sec-proxy.revocable Proxy.revocable ( target, handler )", "html": "<emu-clause id=\"sec-proxy.revocable\">\n        <h1><span class=\"secnum excluded-secnum\" excluded-id=\"sec-proxy.revocable\">#sec-proxy.revocable</span> Proxy.revocable ( <var>target</var>, <var>handler</var> )</h1>\n        <p>The <code>Proxy.revocable</code> function is used to create a revocable Proxy object. When <code>Proxy.revocable</code> is called with arguments <var>target</var> and <var>handler</var>, the following steps are taken:</p>\n        <emu-alg><ol><li>Let <var>p</var> be ?&#160;<emu-xref aoid=\"ProxyCreate\"><a href=\"#sec-proxycreate\">ProxyCreate</a></emu-xref>(<var>target</var>, <var>handler</var>).</li><li>Let <var>steps</var> be the algorithm steps defined in <emu-xref href=\"#sec-proxy-revocation-functions\" title=\"\"><a href=\"#sec-proxy-revocation-functions\">Proxy Revocation Functions</a></emu-xref>.</li><li>Let <var>length</var> be the number of non-optional parameters of the function definition in <emu-xref href=\"#sec-proxy-revocation-functions\" title=\"\"><a href=\"#sec-proxy-revocation-functions\">Proxy Revocation Functions</a></emu-xref>.</li><li>Let <var>revoker</var> be !&#160;<emu-xref aoid=\"CreateBuiltinFunction\"><a href=\"#sec-createbuiltinfunction\">CreateBuiltinFunction</a></emu-xref>(<var>steps</var>, <var>length</var>, <emu-val>\"\"</emu-val>, &#171; [[RevocableProxy]] &#187;).</li><li>Set <var>revoker</var>.[[RevocableProxy]] to <var>p</var>.</li><li>Let <var>result</var> be !&#160;<emu-xref aoid=\"OrdinaryObjectCreate\"><a href=\"#sec-ordinaryobjectcreate\">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href=\"#sec-properties-of-the-object-prototype-object\"><a href=\"#sec-properties-of-the-object-prototype-object\">%Object.prototype%</a></emu-xref>).</li><li>Perform !&#160;<emu-xref aoid=\"CreateDataPropertyOrThrow\"><a href=\"#sec-createdatapropertyorthrow\">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, <emu-val>\"proxy\"</emu-val>, <var>p</var>).</li><li>Perform !&#160;<emu-xref aoid=\"CreateDataPropertyOrThrow\"><a href=\"#sec-createdatapropertyorthrow\">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, <emu-val>\"revoke\"</emu-val>, <var>revoker</var>).</li><li>Return <var>result</var>.</li></ol></emu-alg>\n\n        <div id=\"excluded-sec-proxy-revocation-functions\"><h1><span class=\"secnum\">28.2.2.1.1</span>#sec-proxy-revocation-functions Proxy Revocation Functions</h1>...</div></emu-clause>\n    "}}, "figData": {}}, "to": {"secList": ["sec-proxy.revocable"], "secData": {"sec-proxy.revocable": {"num": "28.2.2.1", "title": "#sec-proxy.revocable Proxy.revocable ( target, handler )", "html": "<emu-clause id=\"sec-proxy.revocable\" oldids=\"sec-proxy-revocation-functions\"><span id=\"sec-proxy-revocation-functions\"></span>\n        <h1><span class=\"secnum excluded-secnum\" excluded-id=\"sec-proxy.revocable\">#sec-proxy.revocable</span> Proxy.revocable ( <var>target</var>, <var>handler</var> )</h1>\n        <p>The <code>Proxy.revocable</code> function is used to create a revocable Proxy object. When <code>Proxy.revocable</code> is called with arguments <var>target</var> and <var>handler</var>, the following steps are taken:</p>\n        <emu-alg><ol><li>Let <var>p</var> be ?&#160;<emu-xref aoid=\"ProxyCreate\"><a href=\"#sec-proxycreate\">ProxyCreate</a></emu-xref>(<var>target</var>, <var>handler</var>).</li><li>Let <var>revokerClosure</var> be a new <emu-xref href=\"#sec-abstract-closure\"><a href=\"#sec-abstract-closure\">Abstract Closure</a></emu-xref> with no parameters that captures nothing and performs the following steps when called:<ol><li>Let <var>F</var> be the <emu-xref href=\"#active-function-object\"><a href=\"#active-function-object\">active function object</a></emu-xref>.</li><li>Let <var>p</var> be <var>F</var>.[[RevocableProxy]].</li><li>If <var>p</var> is <emu-val>null</emu-val>, return <emu-val>undefined</emu-val>.</li><li>Set <var>F</var>.[[RevocableProxy]] to <emu-val>null</emu-val>.</li><li><emu-xref href=\"#assert\"><a href=\"#assert\">Assert</a></emu-xref>: <var>p</var> is a Proxy object.</li><li>Set <var>p</var>.[[ProxyTarget]] to <emu-val>null</emu-val>.</li><li>Set <var>p</var>.[[ProxyHandler]] to <emu-val>null</emu-val>.</li><li>Return <emu-val>undefined</emu-val>.</li></ol></li><li>Let <var>revoker</var> be !&#160;<emu-xref aoid=\"CreateBuiltinFunction\"><a href=\"#sec-createbuiltinfunction\">CreateBuiltinFunction</a></emu-xref>(<var>revokerClosure</var>, 0, <emu-val>\"\"</emu-val>, &#171; [[RevocableProxy]] &#187;).</li><li>Set <var>revoker</var>.[[RevocableProxy]] to <var>p</var>.</li><li>Let <var>result</var> be !&#160;<emu-xref aoid=\"OrdinaryObjectCreate\"><a href=\"#sec-ordinaryobjectcreate\">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href=\"#sec-properties-of-the-object-prototype-object\"><a href=\"#sec-properties-of-the-object-prototype-object\">%Object.prototype%</a></emu-xref>).</li><li>Perform !&#160;<emu-xref aoid=\"CreateDataPropertyOrThrow\"><a href=\"#sec-createdatapropertyorthrow\">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, <emu-val>\"proxy\"</emu-val>, <var>p</var>).</li><li>Perform !&#160;<emu-xref aoid=\"CreateDataPropertyOrThrow\"><a href=\"#sec-createdatapropertyorthrow\">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, <emu-val>\"revoke\"</emu-val>, <var>revoker</var>).</li><li>Return <var>result</var>.</li></ol></emu-alg>\n      </emu-clause>\n    "}}, "figData": {}}}